theurl <- 'http://en.wikipedia.org/wiki/Public_opinion_of_same-sex_marriage_in_the_United_States#By_state'
tables <- readHTMLTable(theurl)
n.rows <- unlist(lapply(tables, function(t) dim(t)[1]))
airline = "http://www.theacsi.org/index.php?option=com_content&view=article&id=147&catid=&Itemid=212&i=Airlines"
airline.table = readHTMLTable(airline, header=T, which=1,stringsAsFactors=F)
d = readHTMLTable(theurl, header=T, which=1,stringsAsFactors=F)
d
d = readHTMLTable(theurl, header=T, which=3,stringsAsFactors=F)
d = readHTMLTable(theurl, header=T, which=4,stringsAsFactors=F)
d = readHTMLTable(theurl, header=T, which=5,stringsAsFactors=F)
d
d = readHTMLTable(theurl, header=T, which=6,stringsAsFactors=F)
d = readHTMLTable(theurl, header=T, which=7,stringsAsFactors=F)
d
d = readHTMLTable(theurl, header=T, which=27,stringsAsFactors=F)
d
table <-  readHTMLTable(theurl, header=T, which=27,stringsAsFactors=F)
n.rows <- unlist(lapply(table, function(t) dim(t)[1]))
n.rows
n.rows
View(table)
table <- table[order(table$State),]
View(table)
View(table)
table
theurl <- 'http://en.wikipedia.org/wiki/Public_opinion_of_same-sex_marriage_in_the_United_States#By_state'
table <-  readHTMLTable(theurl, header=T, which=27,stringsAsFactors=F)
table <- table[order(table$State),]
View(table)
table <-  readHTMLTable(theurl, header=T, which=27,stringsAsFactors=F)
View(table)
d <- table[order(table$State),]
View(d)
table <-  readHTMLTable(theurl, header=T, which=27,stringsAsFactors=F)
names(table)
n <- names(table)
fix(n)
fix(n)
View(table)
# Read and parse HTML file
theurl <- 'http://en.wikipedia.org/wiki/Public_opinion_of_same-sex_marriage_in_the_United_States#By_state'
table <-  readHTMLTable(theurl, header=T, which=27,stringsAsFactors=F)
colnames(table) <- c("State", "% support\n(at 95% confidence level)", "support","% opposition",
"% opposition.y", "% no opinion", "% no opinion.y", "Date of poll", "Sample size")
View(table)
getwd
getwd()
setwd("/Users/dphnrome/Documents/Git/SameSexMarriage/")
write.csv(table, "./data/PollingData.csv")
# Read and parse HTML file
doc.html = htmlTreeParse('http://en.wikipedia.org/wiki/List_of_supporters_of_same-sex_marriage_in_the_United_States#Elected_officials',
useInternal = TRUE)
# Extract all the paragraphs (HTML tag is p, starting at
# the root of the document). Unlist flattens the list to
# create a character vector.
doc.text = unlist(xpathApply(doc.html, '//li', xmlValue))
# make a df
d <- as.data.frame(doc.text)
View(d)
write.csv(d, "./data/PoliticianData.csv")
